<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="./assets/main.css">
<link rel="stylesheet" href="../../dist/css/sa11y.min.css" />

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sa11y Unit Tests</title>
</head>

<body>
  <header>
    <h1>Sa11y Unit Tests</h1>
  </header>
  <main>
    <h2>Misc test cases</h2>

    <h2>Invalid ARIA references</h2>
    <h3>aria-labelledby referencing invalid ID</h3>
    <div id="error-arialabelledby-invalid-reference">
      <a href="https://www.example.com" aria-labelledby="content">References non-existent ID on page</a>
    </div>

    <h2>Same-page links</h2>

    <h3>Link when &lt;a href&gt;</h3>
    <div id="error-broken-same-page-empty-href"><a href="">test</a></div>

    <h3>Link used as button without roles</h3>
    <div id="error-broken-same-page"><a href="#">User</a></div>

    <h3>In-page link referencing duplicate IDs</h3>
    <div id="error-broken-same-page">
      <a href="#asdfgh">User</a>


      <p id="asdfgh">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Natus nam voluptate doloribus, iure alias
        possimus distinctio recusandae impedit asperiores necessitatibus! Amet perferendis laborum accusantium,
        dignissimos iste voluptatum nam id alias!</p>
      <p id="asdfgh">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Natus nam voluptate doloribus, iure alias
        possimus distinctio recusandae impedit asperiores necessitatibus! Amet perferendis laborum accusantium,
        dignissimos
        iste voluptatum nam id alias!</p>
    </div>

    <h3>Link used as button with proper role</h3>
    <div id="nothing-same-page-with-role"><a href="#" role="button">User</a></div>

    <h2>Link using aria-labelledby referencing duplicate IDs</h2>
    <a href="https://www.example.com" aria-labelledby="another">Learn more</a>
    <p id="another">Apples</p>
    <p id="another">Pears</p>
    <hr>

    <h2>Two buttons with same ID</h2>
    <button id="play">Play</button>
    <button id="play">Play</button>

    <hr>

    <h2>Shadow DOM</h2>
    <div id="error-shadow-dom" class="shadow-root"></div>

  </main>
  <footer></footer>
  <script>
    class shadowTest extends HTMLElement {
      constructor() {
        super();
      }
      connectedCallback() {
        if (!this.initialized) {
          const shadow = this.attachShadow({ mode: 'open' });
          const div = document.createElement('div');
          div.innerHTML = `
          <h3 id="test">Duplicate ID in shadow DOM</h3>
          <a href="#testy">Skip to content</a>
          <p id="test">Lorem ipsum</p>
          <p id="testy">Some content here.</p>
          `
          shadow.appendChild(div);
          this.initialized = true;
        }
      }
    }
    customElements.define('shadow-test', shadowTest);
    document.querySelectorAll('.shadow-root').forEach(($el) => {
      let testShadowElement = document.createElement('shadow-test');
      $el.append(testShadowElement);
    })
  </script>
  <script src="../../dist/js/sa11y.umd.min.js"></script>
  <script src="../../dist/js/lang/en.umd.js"></script>
  <script>
    Sa11y.Lang.addI18n(Sa11yLangEn.strings);
    const sa11y = new Sa11y.Sa11y({
      checkRoot: "main",
      autoDetectShadowComponents: true,
    });
  </script>
</body>

</html>